import{d as q,g as C,r as U,J as H,h as p,i as V,j as w,c as l,k as o,l as s,m as r,b as c,L as k,M as L,N as O,n as F,t as b,S as P,T as A,U as D,V as I,R as J,W as G}from"./index-ba151775.js";const K={class:"scroll-y"},Q=s("h3",null,"Webdav服务配置",-1),X=s("br",null,null,-1),Y={class:"scroll-y"},Z=s("span",{color:"gray",style:{"font-size":"12px","margin-left":"12px"}},"修改后重启生效",-1),ee={class:"dialog-footer"},le={class:"card-header",style:{height:"35px"}},ae={style:{"margin-top":"10px"}},oe={class:"dark"},te=s("br",null,null,-1),se={style:{clear:"both"}},ne=s("span",{color:"gray",style:{"font-size":"12px","margin-left":"12px"}},"新增后重启生效",-1),de=q({}),ie=Object.assign(de,{__name:"index",setup(re){const m=C(!1),y=U([]),t=U({}),x={name:"webdav",path:"/webdav/*",describe:"webdav服务",serverHost:"192.168.1.100",serverPort:"5244",https:!1,enable:!0,passwdList:[{id:Math.random(),password:"123456",encType:"aesctr",enable:!1,encName:!1,encSuffix:"",describe:"my video",encPath:"/aliyun/encrypt/*"}]};Object.assign(t,x),C();const T=()=>{t.passwdList.push({id:Math.random(),password:"123456",encType:"aesctr",enable:!0,encName:!1,encSuffix:"",describe:"my video",encPath:"/dav/encrypt/*"})},W=n=>{t.passwdList.splice(n,1)},N=n=>{m.value=!0,Object.assign(t,n)},M=()=>{m.value=!0,Object.assign(t,x)},R=async n=>{const a=await P(n);m.value=!1,v(a)},S=async()=>{let n=null;t.id?n=await P(t):n=await A(t),m.value=!1,v(n)},$=async n=>{D.confirm("Are you sure to delete?").then(async()=>{const a=await I({id:n});v(a),m.value=!1,J(a.msg)})},v=async n=>{const a=n||await G();y.splice(0,y.length),a.data.forEach(i=>{const u=i.passwdList;for(const _ of u)_.id=Math.random();y.push(i)})};return H(async()=>{v()}),(n,a)=>{const i=p("el-input"),u=p("el-form-item"),_=p("el-switch"),f=p("el-button"),g=p("el-radio"),j=p("el-radio-group"),z=p("el-form"),B=p("el-dialog"),E=p("el-card");return V(),w("div",K,[Q,X,l(B,{modelValue:m.value,"onUpdate:modelValue":a[7]||(a[7]=e=>m.value=e),title:"配置信息",style:{"min-width":"320px"}},{default:o(()=>[s("div",Y,[l(z,{model:r(t)},{default:o(()=>[l(u,{prop:"username",label:"服务名称"},{default:o(()=>[l(i,{modelValue:r(t).name,"onUpdate:modelValue":a[0]||(a[0]=e=>r(t).name=e),style:{"max-width":"260px"},placeholder:"127.0.0.1"},null,8,["modelValue"])]),_:1}),l(u,{prop:"username",label:"服务器"},{default:o(()=>[l(i,{modelValue:r(t).serverHost,"onUpdate:modelValue":a[1]||(a[1]=e=>r(t).serverHost=e),style:{"max-width":"260px"},placeholder:"127.0.0.1"},null,8,["modelValue"])]),_:1}),l(u,{prop:"password",label:"端口"},{default:o(()=>[l(i,{modelValue:r(t).serverPort,"onUpdate:modelValue":a[2]||(a[2]=e=>r(t).serverPort=e),style:{"max-width":"260px"},placeholder:"5244"},null,8,["modelValue"])]),_:1}),l(u,{prop:"password",label:"主目录"},{default:o(()=>[l(i,{modelValue:r(t).path,"onUpdate:modelValue":a[3]||(a[3]=e=>r(t).path=e),style:{"max-width":"260px"},placeholder:"5244"},null,8,["modelValue"]),Z]),_:1}),l(u,{prop:"enable",label:"开启"},{default:o(()=>[l(_,{modelValue:r(t).enable,"onUpdate:modelValue":a[4]||(a[4]=e=>r(t).enable=e),class:"ml-2",style:{"margin-bottom":"5px","--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1}),l(u,{label:"密码设置"},{default:o(()=>[l(f,{type:"success",onClick:T},{default:o(()=>[c("添加")]),_:1})]),_:1}),(V(!0),w(k,null,L(r(t).passwdList,(e,h)=>(V(),w("div",{key:e.id},[l(j,{modelValue:e.encType,"onUpdate:modelValue":d=>e.encType=d,style:{margin:"0 25px"},size:"small"},{default:o(()=>[l(g,{label:"rc4",border:""},{default:o(()=>[c("RC4")]),_:1}),l(g,{label:"aesctr",border:""},{default:o(()=>[c("AES-CTR(新)")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),c(" 开启 "),l(_,{modelValue:e.enable,"onUpdate:modelValue":d=>e.enable=d,class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue","onUpdate:modelValue"]),l(f,{type:"danger",style:{margin:"5px 20px"},icon:r(O),circle:"",onClick:d=>W(h)},null,8,["icon","onClick"]),l(u,{label:"密码"},{default:o(()=>[l(i,{modelValue:e.password,"onUpdate:modelValue":d=>e.password=d,style:{"max-width":"260px","margin-right":"10px"},placeholder:"12341234"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(u,{label:"文件名"},{default:o(()=>[c(" 加密 "),l(_,{modelValue:e.encName,"onUpdate:modelValue":d=>e.encName=d,class:"ml-2",style:{"margin-right":"10px","--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue","onUpdate:modelValue"]),c(" 后缀 "),l(i,{modelValue:e.encSuffix,"onUpdate:modelValue":d=>e.encSuffix=d,style:{"max-width":"150px","margin-left":"10px"},placeholder:".bin / 默认原文件名后缀"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(u,{label:"备注"},{default:o(()=>[l(i,{modelValue:e.describe,"onUpdate:modelValue":d=>e.describe=d,style:{"max-width":"260px","margin-right":"10px"},placeholder:"备注描述"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(u,{label:"路径"},{default:o(()=>[l(i,{modelValue:e.encPath,"onUpdate:modelValue":d=>e.encPath=d,style:{"max-width":"350px","margin-right":"10px"},placeholder:"多个路径逗号，隔开"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]))),128))]),_:1},8,["model"]),s("span",ee,[l(f,{onClick:a[5]||(a[5]=e=>m.value=!1)},{default:o(()=>[c("取消")]),_:1}),l(f,{type:"primary",onClick:a[6]||(a[6]=e=>S())},{default:o(()=>[c("保存")]),_:1})])])]),_:1},8,["modelValue"]),s("div",null,[(V(!0),w(k,null,L(r(y),e=>(V(),F(E,{key:e.id,style:{width:"250px",margin:"10px",float:"left"},class:""},{default:o(()=>[s("div",le,[l(_,{modelValue:e.enable,"onUpdate:modelValue":h=>e.enable=h,onClick:h=>R(e),class:"ml-2",style:{float:"right","--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue","onUpdate:modelValue","onClick"]),s("span",ae,b(e.name),1)]),s("div",oe,"服务: "+b(e.serverHost),1),s("div",null,"端口: "+b(e.serverPort),1),s("div",null,"路径: "+b(e.path),1),s("div",null,"描述: "+b(e.describe),1),te,l(f,{type:"danger",size:"small",onClick:h=>$(e.id)},{default:o(()=>[c("删除")]),_:2},1032,["onClick"]),l(f,{type:"primary",size:"small",onClick:h=>N(e)},{default:o(()=>[c("编辑")]),_:2},1032,["onClick"])]),_:2},1024))),128))]),s("div",se,[l(f,{type:"success",onClick:M},{default:o(()=>[c("添加配置")]),_:1}),ne])])}}});export{ie as default};
